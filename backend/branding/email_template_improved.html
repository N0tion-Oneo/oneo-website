<!DOCTYPE html>
<html lang="en" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <title>{{ branding.company_name|default:"Oneo" }}</title>

    <!--[if mso]>
    <noscript>
        <xml>
            <o:OfficeDocumentSettings>
                <o:PixelsPerInch>96</o:PixelsPerInch>
            </o:OfficeDocumentSettings>
        </xml>
    </noscript>
    <style>
        table { border-collapse: collapse; }
        td { padding: 0; }
        .button { padding: 14px 28px !important; }
    </style>
    <![endif]-->

    <style type="text/css">
        /* =============================================
           RESETS
        ============================================= */
        body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
        table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        table { border-collapse: collapse !important; }
        body { margin: 0 !important; padding: 0 !important; width: 100% !important; }

        /* =============================================
           BASE TYPOGRAPHY
        ============================================= */
        body, .body-text {
            font-family: '{{ branding.font_family|default:"Poppins" }}', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 15px;
            line-height: 1.6;
            color: #333333;
        }

        /* =============================================
           LAYOUT
        ============================================= */
        .email-wrapper {
            width: 100%;
            background-color: {{ branding.background_color|default:"#f5f5f5" }};
        }
        .email-container {
            max-width: 600px;
            background-color: #ffffff;
        }

        /* =============================================
           ACCENT BAR
        ============================================= */
        .accent-bar {
            height: 4px;
            background: linear-gradient(90deg,
                {{ branding.primary_color|default:"#003E49" }},
                {{ branding.secondary_color|default:"#0D646D" }},
                {{ branding.accent_color|default:"#FF7B55" }}
            );
        }
        /* Outlook fallback for gradient */
        .accent-bar-fallback {
            background-color: {{ branding.primary_color|default:"#003E49" }};
        }

        /* =============================================
           HEADER
        ============================================= */
        .header {
            background-color: {{ branding.header_background|default:"#fafafa" }};
            border-bottom: 1px solid #eaeaea;
        }
        .logo-text {
            font-size: 26px;
            font-weight: 700;
            color: {{ branding.primary_color|default:"#003E49" }};
            letter-spacing: -0.5px;
            text-decoration: none;
        }
        .logo-text a {
            color: {{ branding.primary_color|default:"#003E49" }};
            text-decoration: none;
        }
        .logo-img {
            max-height: 50px;
            width: auto;
        }
        .tagline {
            font-size: 13px;
            color: {{ branding.secondary_color|default:"#0D646D" }};
            font-weight: 500;
        }

        /* =============================================
           CONTENT
        ============================================= */
        .content {
            padding: 32px;
        }
        h1 {
            color: {{ branding.primary_color|default:"#003E49" }};
            font-size: 24px;
            font-weight: 600;
            margin: 0 0 20px 0;
            line-height: 1.3;
        }
        h2 {
            color: {{ branding.primary_color_dark|default:"#002A32" }};
            font-size: 18px;
            font-weight: 600;
            margin: 28px 0 12px 0;
        }
        h3 {
            color: {{ branding.secondary_color|default:"#0D646D" }};
            font-size: 15px;
            font-weight: 600;
            margin: 20px 0 10px 0;
        }
        p {
            margin: 0 0 16px 0;
            color: #555555;
            font-size: 15px;
        }
        a {
            color: {{ branding.secondary_color|default:"#0D646D" }};
        }
        ul, ol {
            margin: 0 0 16px 0;
            padding-left: 24px;
            color: #555555;
        }
        li { margin-bottom: 8px; }

        /* =============================================
           BUTTONS
        ============================================= */
        .button {
            display: inline-block;
            padding: 14px 28px;
            background-color: {{ branding.primary_color|default:"#003E49" }};
            color: #ffffff !important;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            font-size: 15px;
            mso-padding-alt: 0;
            text-align: center;
        }
        .button-secondary {
            background-color: #ffffff;
            color: {{ branding.primary_color|default:"#003E49" }} !important;
            border: 2px solid {{ branding.primary_color|default:"#003E49" }};
        }
        .button-accent {
            background-color: {{ branding.accent_color|default:"#FF7B55" }};
        }
        .button-success {
            background-color: {{ branding.success_color|default:"#10b981" }};
        }
        .button-small {
            padding: 10px 20px;
            font-size: 13px;
        }

        /* =============================================
           BADGES
        ============================================= */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .badge-primary {
            background-color: {{ branding.primary_color_light|default:"#0D646D" }};
            color: #ffffff;
        }
        .badge-accent {
            background-color: {{ branding.accent_color_light|default:"#FFAB97" }};
            color: {{ branding.accent_color_dark|default:"#E65A35" }};
        }
        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        .badge-warning {
            background-color: #fed7aa;
            color: #9a3412;
        }

        /* =============================================
           DETAILS CARD (Table-based for Outlook)
        ============================================= */
        .details {
            background-color: #f9fafb;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        .details-table {
            width: 100%;
        }
        .details-label {
            font-weight: 600;
            color: {{ branding.secondary_color|default:"#0D646D" }};
            font-size: 14px;
            padding: 10px 16px;
            width: 35%;
            vertical-align: top;
        }
        .details-value {
            color: #333333;
            font-size: 14px;
            padding: 10px 16px;
            vertical-align: top;
        }
        .details-row-border {
            border-bottom: 1px solid #e5e7eb;
        }

        /* =============================================
           ALERT BOXES
        ============================================= */
        .alert {
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: 0 6px 6px 0;
        }
        .alert p { margin: 0; }

        .highlight {
            background-color: #e0f2fe;
            border-left: 4px solid {{ branding.secondary_color|default:"#0D646D" }};
        }
        .highlight p { color: {{ branding.secondary_color_dark|default:"#064852" }}; }

        .warning {
            background-color: #fff7ed;
            border-left: 4px solid {{ branding.warning_color|default:"#f97316" }};
        }
        .warning p { color: #9a3412; }

        .success {
            background-color: #ecfdf5;
            border-left: 4px solid {{ branding.success_color|default:"#10b981" }};
        }
        .success p { color: #065f46; }

        .error {
            background-color: #fef2f2;
            border-left: 4px solid {{ branding.error_color|default:"#ef4444" }};
        }
        .error p { color: #991b1b; }

        .info {
            background-color: #fef3e9;
            border-left: 4px solid {{ branding.accent_color|default:"#FF7B55" }};
        }
        .info p { color: {{ branding.accent_color_dark|default:"#E65A35" }}; }

        /* =============================================
           UTILITIES
        ============================================= */
        .divider {
            height: 1px;
            background-color: #eaeaea;
            margin: 24px 0;
        }
        .text-center { text-align: center; }
        .text-muted { color: #888888; font-size: 13px; }
        .text-small { font-size: 13px; }
        .text-accent { color: {{ branding.accent_color|default:"#FF7B55" }}; }
        .text-primary { color: {{ branding.primary_color|default:"#003E49" }}; }
        .text-secondary { color: {{ branding.secondary_color|default:"#0D646D" }}; }
        .font-bold { font-weight: 600; }
        .mt-0 { margin-top: 0; }
        .mb-0 { margin-bottom: 0; }

        /* =============================================
           FOOTER
        ============================================= */
        .footer {
            background-color: {{ branding.header_background|default:"#fafafa" }};
            border-top: 1px solid #eaeaea;
        }
        .footer p {
            margin: 0 0 8px 0;
            color: #888888;
            font-size: 13px;
        }
        .footer a {
            color: {{ branding.secondary_color|default:"#0D646D" }};
            text-decoration: none;
        }
        .footer-links a {
            color: #666666;
        }
        .footer-links .separator {
            color: #cccccc;
            padding: 0 6px;
        }
        .social-link {
            display: inline-block;
            width: 36px;
            height: 36px;
            background-color: {{ branding.primary_color|default:"#003E49" }};
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            margin: 0 4px;
            color: #ffffff !important;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
        }

        /* =============================================
           PREHEADER (Hidden inbox preview text)
        ============================================= */
        .preheader {
            display: none !important;
            visibility: hidden;
            opacity: 0;
            color: transparent;
            height: 0;
            width: 0;
            max-height: 0;
            max-width: 0;
            overflow: hidden;
            mso-hide: all;
        }

        /* =============================================
           CUSTOM CSS
        ============================================= */
        {{ branding.custom_css|default:""|safe }}

        /* =============================================
           DARK MODE LOGO TOGGLE
        ============================================= */
        .logo-light { display: inline-block !important; }
        .logo-dark { display: none !important; }

        /* =============================================
           DARK MODE SUPPORT
        ============================================= */
        @media (prefers-color-scheme: dark) {
            .email-wrapper {
                background-color: #1a1a1a !important;
            }
            .email-container,
            .content {
                background-color: #2d2d2d !important;
            }
            .header,
            .footer {
                background-color: #252525 !important;
            }
            h1, h2, h3,
            .logo-text,
            .logo-text a {
                color: #ffffff !important;
            }
            p, li, .body-text {
                color: #e0e0e0 !important;
            }
            .details {
                background-color: #353535 !important;
                border-color: #444444 !important;
            }
            .details-value {
                color: #e0e0e0 !important;
            }
            .footer p,
            .footer a,
            .footer-links a {
                color: #aaaaaa !important;
            }
            /* Switch to dark mode logo */
            .logo-light { display: none !important; }
            .logo-dark { display: inline-block !important; }
        }

        /* =============================================
           RESPONSIVE
        ============================================= */
        @media only screen and (max-width: 620px) {
            .email-wrapper {
                padding: 10px !important;
            }
            .email-container {
                width: 100% !important;
            }
            .content {
                padding: 24px 20px !important;
            }
            .header-inner,
            .footer-inner {
                padding: 20px !important;
            }
            h1 {
                font-size: 20px !important;
            }
            .button {
                display: block !important;
                text-align: center !important;
                margin: 8px 0 !important;
            }
            .details-label,
            .details-value {
                display: block !important;
                width: 100% !important;
                padding: 8px 16px !important;
            }
            .details-label {
                padding-bottom: 4px !important;
            }
            .social-link {
                margin: 0 3px !important;
            }
        }
    </style>
</head>

<body style="margin: 0; padding: 0; background-color: {{ branding.background_color|default:'#f5f5f5' }};">
    <!-- Preheader (shows in inbox preview) -->
    <div class="preheader">
        {{ preheader_text|default:"You have a new message"|truncatewords:20 }}
        &nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;&nbsp;&zwnj;
    </div>

    <!-- Email Wrapper -->
    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" class="email-wrapper" style="background-color: {{ branding.background_color|default:'#f5f5f5' }};">
        <tr>
            <td align="center" style="padding: 40px 20px;">
                <!--[if mso]>
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" align="center">
                <tr>
                <td>
                <![endif]-->

                <!-- Email Container -->
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" class="email-container" style="max-width: 600px; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">

                    <!-- Accent Bar -->
                    <tr>
                        <td class="accent-bar accent-bar-fallback" style="height: 4px; line-height: 0; font-size: 0;">&nbsp;</td>
                    </tr>

                    <!-- Header -->
                    <tr>
                        <td class="header">
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                                <tr>
                                    <td class="header-inner" align="center" style="padding: 28px 32px 24px 32px;">
                                        <!-- Logo or Company Name -->
                                        {% if branding.logo_url %}
                                        <a href="{{ site_url }}" style="text-decoration: none;">
                                            <!-- Light mode logo -->
                                            <img src="{{ branding.logo_url }}" alt="{{ branding.company_name|default:'Oneo' }}" class="logo-img logo-light" style="max-height: 50px; width: auto;">
                                            <!-- Dark mode logo (hidden by default, shown in dark mode) -->
                                            {% if branding.logo_dark_url %}
                                            <img src="{{ branding.logo_dark_url }}" alt="{{ branding.company_name|default:'Oneo' }}" class="logo-img logo-dark" style="max-height: 50px; width: auto; display: none;">
                                            {% else %}
                                            <!-- Fallback: use same logo for dark mode if no dark logo set -->
                                            <img src="{{ branding.logo_url }}" alt="{{ branding.company_name|default:'Oneo' }}" class="logo-img logo-dark" style="max-height: 50px; width: auto; display: none;">
                                            {% endif %}
                                        </a>
                                        {% else %}
                                        <div class="logo-text">
                                            <a href="{{ site_url }}">{{ branding.company_name|default:"Oneo" }}</a>
                                        </div>
                                        {% endif %}

                                        <!-- Tagline -->
                                        {% if branding.tagline %}
                                        <div class="tagline" style="margin-top: 8px;">{{ branding.tagline }}</div>
                                        {% endif %}
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <!-- Content -->
                    <tr>
                        <td class="content body-text">
                            {{ email_content|safe }}
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td class="footer">
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                                <tr>
                                    <td class="footer-inner" align="center" style="padding: 24px 32px;">

                                        <!-- Footer Text -->
                                        {% if branding.footer_text %}
                                        <p style="margin: 0 0 12px 0;">{{ branding.footer_text }}</p>
                                        {% else %}
                                        <p style="margin: 0 0 12px 0;">This email was sent by {{ branding.company_name|default:"Oneo" }}.</p>
                                        {% endif %}

                                        <!-- Support Email -->
                                        {% if branding.support_email %}
                                        <p style="margin: 0 0 16px 0;">
                                            Questions? Contact us at
                                            <a href="mailto:{{ branding.support_email }}">{{ branding.support_email }}</a>
                                        </p>
                                        {% endif %}

                                        <!-- Social Links (Text-based for better compatibility) -->
                                        {% if branding.facebook_url or branding.twitter_url or branding.linkedin_url or branding.instagram_url %}
                                        <div style="margin: 20px 0;">
                                            {% if branding.facebook_url %}
                                            <a href="{{ branding.facebook_url }}" class="social-link" title="Facebook">f</a>
                                            {% endif %}
                                            {% if branding.twitter_url %}
                                            <a href="{{ branding.twitter_url }}" class="social-link" title="X">X</a>
                                            {% endif %}
                                            {% if branding.linkedin_url %}
                                            <a href="{{ branding.linkedin_url }}" class="social-link" title="LinkedIn">in</a>
                                            {% endif %}
                                            {% if branding.instagram_url %}
                                            <a href="{{ branding.instagram_url }}" class="social-link" title="Instagram">ig</a>
                                            {% endif %}
                                        </div>
                                        {% endif %}

                                        <!-- Footer Links -->
                                        <div class="footer-links" style="margin-top: 16px;">
                                            {% if branding.website_url %}
                                            <a href="{{ branding.website_url }}">Website</a>
                                            {% else %}
                                            <a href="{{ site_url }}">Website</a>
                                            {% endif %}
                                            <span class="separator">•</span>
                                            <a href="{{ site_url }}/dashboard/settings">Email Preferences</a>
                                            {% if branding.privacy_policy_url %}
                                            <span class="separator">•</span>
                                            <a href="{{ branding.privacy_policy_url }}">Privacy</a>
                                            {% endif %}
                                            {% if branding.terms_of_service_url %}
                                            <span class="separator">•</span>
                                            <a href="{{ branding.terms_of_service_url }}">Terms</a>
                                            {% endif %}
                                        </div>

                                        <!-- Copyright -->
                                        <p style="margin-top: 20px; font-size: 12px; color: #aaaaaa;">
                                            &copy; {% now "Y" %} {{ branding.company_name|default:"Oneo" }}. All rights reserved.
                                        </p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>

                <!--[if mso]>
                </td>
                </tr>
                </table>
                <![endif]-->
            </td>
        </tr>
    </table>
</body>
</html>
